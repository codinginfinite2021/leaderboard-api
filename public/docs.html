<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leaderboard API Docs + Demo</title>
<style>
body{
  margin:0; padding:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#0f172a,#111827);
  color:#fff;
}
header{
  text-align:center; padding:40px 20px;
}
header h1{color:#38bdf8;}
header p{color:#9ca3af; max-width:700px; margin:auto;}
.container{max-width:650px;margin:auto;padding:20px;}
.card{
  background:#111827;
  padding:20px;
  border-radius:12px;
  margin:15px 0;
}
h2{color:#22c55e;}
pre, code{
  background:#020617;
  padding:10px;
  border-radius:10px;
  display:block;
  overflow:auto;
}
input, button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
  border:none;
  font-size:16px;
}
button{background:#22c55e;color:#000;font-weight:bold;cursor:pointer;}
#clickBtn{background:#facc15; display:none;}
ul{padding-left:0; margin-top:10px;}
li{list-style:none; background:#111827; margin:5px 0; padding:10px; border-radius:8px; display:flex; justify-content:space-between;}
.footer{text-align:center; margin-top:20px; opacity:0.7; font-size:12px;}
@media(max-width:500px){input,button{font-size:14px;}}
</style>
</head>
<body>

<header>
<h1>üåç Leaderboard API Docs + Demo</h1>
<p>Send player info, submit score, fetch leaderboard, and see live demo with auto country detection. Works on web & mobile!</p>
</header>

<div class="container">

<!-- 1. What API does -->
<div class="card">
<h2>1Ô∏è‚É£ What this API does</h2>
<ul>
<li>Register players with name, country, and emoji</li>
<li>Submit scores for any game</li>
<li>Get live leaderboard for a game</li>
<li>Automatically detects user country using IP</li>
<li>Unique usernames: same name updates info</li>
<li>Supports multiple games</li>
</ul>
</div>

<!-- 2. How API works -->
<div class="card">
<h2>2Ô∏è‚É£ How API Works</h2>
<p>Main endpoints:</p>
<pre>
POST /game        ‚Üí Create new game, get GAME_ID
POST /player      ‚Üí Register player (name, country, emoji)
POST /score       ‚Üí Submit score for player
GET /leaderboard/:game_id ‚Üí Get leaderboard for a game
</pre>
<p>Flow Example:</p>
<pre>
1Ô∏è‚É£ Create game ‚Üí POST /game ‚Üí get GAME_ID
2Ô∏è‚É£ Register player ‚Üí POST /player
3Ô∏è‚É£ Submit score ‚Üí POST /score
4Ô∏è‚É£ Fetch leaderboard ‚Üí GET /leaderboard/:game_id
</pre>
</div>

<!-- 3. How to send info -->
<div class="card">
<h2>3Ô∏è‚É£ Send Player Info</h2>
<p>Send player name, country, and emoji. Same name updates info.</p>
<pre>
POST /player
{
  "name": "Rahul",
  "country": "India",
  "emoji": "üáÆüá≥"
}
Response:
{
  "player_id": "player-xyz",
  "message": "New player created or info updated"
}
</pre>
</div>

<!-- 4. How to submit score -->
<div class="card">
<h2>4Ô∏è‚É£ Submit Score</h2>
<pre>
POST /score
{
  "player_id": "player-xyz",
  "game_id": "PASTE_YOUR_GAME_ID",
  "score": 18
}
Response:
{
  "success": true,
  "message": "Score added or updated"
}
</pre>
</div>

<!-- 5. Fetch leaderboard -->
<div class="card">
<h2>5Ô∏è‚É£ Get Leaderboard</h2>
<pre>
GET /leaderboard/PASTE_YOUR_GAME_ID

Response:
[
  { "name": "Rahul", "country": "India", "emoji": "üáÆüá≥", "score": 18 },
  { "name": "Amit", "country": "USA", "emoji": "üá∫üá∏", "score": 15 }
]
</pre>
</div>

<!-- 6. JS Example -->
<div class="card">
<h2>6Ô∏è‚É£ JS Example: Send info, score, get leaderboard</h2>
<pre>
const API = "https://leaderboard-api-24cj.onrender.com"; // Your API URL
const GAME_ID = "PASTE_YOUR_GAME_ID";

// Register player
fetch(API + "/player", {
  method: "POST",
  headers: {"Content-Type": "application/json"},
  body: JSON.stringify({name:"Rahul", country:"India", emoji:"üáÆüá≥"})
})
.then(r => r.json())
.then(player => {
  const playerId = player.player_id;

  // Submit score
  fetch(API + "/score", {
    method:"POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({player_id:playerId, game_id:GAME_ID, score:20})
  });

  // Get leaderboard
  fetch(API + "/leaderboard/" + GAME_ID)
    .then(r => r.json())
    .then(data => console.log(data));
});
</pre>
</div>

<!-- 7. Demo Game -->
<div class="card">
<h2>7Ô∏è‚É£ Demo Game: Click Speed Game</h2>
<p>Enter your name, click as many times as you can in 5 seconds. Score is sent automatically.</p>
<input id="name" placeholder="Enter your name">
<button id="startBtn">Start Game (5 sec)</button>
<button id="clickBtn">Click Me!</button>

<ul id="leaderboard"></ul>
</div>

<div class="footer">
  <a href="https://www.youtube.com/@CodingInfinite>subscribe on yt @codinginfinite</a>

</div>
</div>

<script>
const API = "https://leaderboard-api-24cj.onrender.com"; // Replace with your API URL
const GAME_ID = "PASTE_YOUR_GAME_ID"; // Replace with your GAME_ID

let clicks=0, gameActive=false;
const nameInput=document.getElementById("name");
const startBtn=document.getElementById("startBtn");
const clickBtn=document.getElementById("clickBtn");
const leaderboard=document.getElementById("leaderboard");

startBtn.onclick=()=>{
  if(!nameInput.value){ alert("Enter your name!"); return; }
  clicks=0; gameActive=true; clickBtn.style.display="block"; startBtn.disabled=true;
  setTimeout(endGame,5000);
};

clickBtn.onclick=()=>{ if(gameActive) clicks++; }

async function endGame(){
  gameActive=false; clickBtn.style.display="none"; startBtn.disabled=false;
  alert(`Time's up! Your score: ${clicks}`);

  // Detect country automatically
  const geo = await fetch("https://ipapi.co/json/").then(r=>r.json());
  const emoji = geo.country_code ? geo.country_code.replace(/./g,c=>String.fromCodePoint(127397+c.charCodeAt())) : "üåç";

  // Register/update player
  const playerId = await fetch(API+"/player", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({name:nameInput.value, country:geo.country_name, emoji})
  }).then(r=>r.json()).then(d=>d.player_id);

  // Send score
  await fetch(API+"/score", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({player_id:playerId, game_id:GAME_ID, score:clicks})
  });

  loadLeaderboard();
}

async function loadLeaderboard(){
  const data = await fetch(API+"/leaderboard/"+GAME_ID).then(r=>r.json());
  leaderboard.innerHTML="";
  data.forEach((p,i)=>{
    const li=document.createElement("li");
    li.innerHTML=`<span>#${i+1} ${p.emoji} ${p.name}</span><span>${p.score}</span>`;
    leaderboard.appendChild(li);
  });
}

// Load leaderboard on page load
loadLeaderboard();
</script>

</body>
</html>


